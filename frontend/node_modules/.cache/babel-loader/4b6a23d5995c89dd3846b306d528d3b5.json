{"ast":null,"code":"class Auth {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  setToken(token) {\n    this._headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    };\n  }\n\n  signup(password, email) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        password,\n        email\n      })\n    }).then(res => this._checkResponse(res));\n  }\n\n  signin(password, email) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        password,\n        email\n      })\n    }).then(res => this._checkResponse(res));\n  }\n\n  checkTokenValidity(jwt) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${jwt}`\n      }\n    }).then(res => this._checkResponse(res));\n  }\n\n}\n\nconst auth = new Auth({\n  baseUrl: \"https://register.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default auth;","map":{"version":3,"sources":["C:/Users/amyra/Desktop/Practicum100/react-around-api-full/frontend/src/utils/auth.js"],"names":["Auth","constructor","options","_baseUrl","baseUrl","_headers","headers","_checkResponse","res","ok","json","Promise","reject","status","setToken","token","signup","password","email","fetch","method","body","JSON","stringify","then","signin","checkTokenValidity","jwt","auth"],"mappings":"AAAA,MAAMA,IAAN,CAAW;AACTC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,SAAKC,QAAL,GAAgBD,OAAO,CAACE,OAAxB;AACA,SAAKC,QAAL,GAAgBH,OAAO,CAACI,OAAxB;AACD;;AAEDC,EAAAA,cAAc,CAACC,GAAD,EAAM;AAClB,QAAGA,GAAG,CAACC,EAAP,EAAW;AACT,aAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAgB,UAASJ,GAAG,CAACK,MAAO,EAApC,CAAP;AACD;;AAEDC,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACd,SAAKV,QAAL,GAAgB;AACdC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAkB,UAASS,KAAM;AAF1B;AADK,KAAhB;AAMD;;AAGDC,EAAAA,MAAM,CAAEC,QAAF,EAAYC,KAAZ,EAAoB;AACxB,WAAOC,KAAK,CAAE,GAAE,KAAKhB,QAAS,SAAlB,EAA4B;AACtCiB,MAAAA,MAAM,EAAE,MAD8B;AAEtCd,MAAAA,OAAO,EAAE,KAAKD,QAFwB;AAGtCgB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEN,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAf;AAHgC,KAA5B,CAAL,CAKJM,IALI,CAKChB,GAAG,IAAI,KAAKD,cAAL,CAAoBC,GAApB,CALR,CAAP;AAMD;;AAEDiB,EAAAA,MAAM,CAAER,QAAF,EAAYC,KAAZ,EAAoB;AACxB,WAAOC,KAAK,CAAE,GAAE,KAAKhB,QAAS,SAAlB,EAA4B;AACtCiB,MAAAA,MAAM,EAAE,MAD8B;AAEtCd,MAAAA,OAAO,EAAE,KAAKD,QAFwB;AAGtCgB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEN,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAf;AAHgC,KAA5B,CAAL,CAKJM,IALI,CAKChB,GAAG,IAAI,KAAKD,cAAL,CAAoBC,GAApB,CALR,CAAP;AAMD;;AAEDkB,EAAAA,kBAAkB,CAAEC,GAAF,EAAQ;AACxB,WAAOR,KAAK,CAAE,GAAE,KAAKhB,QAAS,WAAlB,EAA8B;AACxCiB,MAAAA,MAAM,EAAE,KADgC;AAExCd,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAmB,UAASqB,GAAI;AAFzB;AAF+B,KAA9B,CAAL,CAOJH,IAPI,CAOChB,GAAG,IAAI,KAAKD,cAAL,CAAoBC,GAApB,CAPR,CAAP;AAQD;;AAlDQ;;AAqDT,MAAMoB,IAAI,GAAG,IAAI5B,IAAJ,CAAS;AACpBI,EAAAA,OAAO,EAAE,mCADW;AAEpBE,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AAFW,CAAT,CAAb;AAOA,eAAesB,IAAf","sourcesContent":["class Auth {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Error: ${res.status}`);\r\n  }\r\n\r\n  setToken(token) {\r\n    this._headers = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  signup( password, email ) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ password, email }),\r\n    })\r\n      .then(res => this._checkResponse(res));\r\n  }; \r\n\r\n  signin( password, email ) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ password, email }),\r\n    })\r\n      .then(res => this._checkResponse(res));\r\n  };\r\n\r\n  checkTokenValidity( jwt ) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${jwt}`\r\n      }\r\n    })\r\n      .then(res => this._checkResponse(res));\r\n  };\r\n}\r\n\r\n  const auth = new Auth({\r\n    baseUrl: \"https://register.nomoreparties.co\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }); \r\n  \r\n  export default auth;"]},"metadata":{},"sourceType":"module"}