{"ast":null,"code":"import _toConsumableArray from\"C:/Users/magshimim/Desktop/practicum100/around-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/magshimim/Desktop/practicum100/around-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForm';import ImagePopup from'./ImagePopup';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import api from'../utils/api.js';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),cards=_useState10[0],setCards=_useState10[1];var _useState11=useState({name:'',description:'',avatar:null,id:''}),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];useEffect(function(){api.getUserInfo().then(function(userInfo){setCurrentUser({name:userInfo.name,description:userInfo.about,avatar:userInfo.avatar,_id:userInfo._id});}).catch(function(error){console.log(error);});api.getInitialCards().then(function(serverCards){setCards(serverCards);}).catch(function(error){console.log(error);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.toggleLike(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardDelete(card){api.removeCard(card._id).then(function(){setCards(function(){return cards.filter(function(c){return c._id!==card._id;});});});}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(null);}function handleCardClick(card){setSelectedCard(card);}function handleUpdateUser(data){api.setUserInfo(data).then(function(userInfo){setCurrentUser({name:userInfo.name,description:userInfo.about,avatar:userInfo.avatar,_id:userInfo._id});closeAllPopups();}).catch(function(error){console.log(error);});}function handleUpdateAvatar(data){api.setUserAvatar(data).then(function(userInfo){setCurrentUser({name:userInfo.name,description:userInfo.about,avatar:userInfo.avatar,_id:userInfo._id});closeAllPopups();}).catch(function(error){console.log(error);});}function handleAddPlaceSubmit(data){api.addNewCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(error){console.log(error);});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page__wrapper\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete,onEditProfileClick:handleEditProfileClick,onAddPlaceClick:handleAddPlaceClick,onEditAvatarClick:handleEditAvatarClick,onCardClick:handleCardClick}),/*#__PURE__*/_jsx(Footer,{})]}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlaceSubmit:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"remove-card\",title:\"Are you sure?\"}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"sources":["C:/Users/magshimim/Desktop/practicum100/around-react/src/components/App.js"],"names":["useState","useEffect","Header","Main","Footer","PopupWithForm","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","api","CurrentUserContext","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","cards","setCards","name","description","avatar","id","currentUser","setCurrentUser","getUserInfo","then","userInfo","about","_id","catch","error","console","log","getInitialCards","serverCards","handleCardLike","card","isLiked","likes","some","i","toggleLike","newCard","state","map","c","handleCardDelete","removeCard","filter","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleCardClick","handleUpdateUser","data","setUserInfo","handleUpdateAvatar","setUserAvatar","handleAddPlaceSubmit","addNewCard"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup  from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport api from '../utils/api.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [cards, setCards] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState({\r\n    name: '',\r\n    description: '',\r\n    avatar: null,\r\n    id: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    api.getUserInfo()\r\n    .then(userInfo => {\r\n      setCurrentUser({\r\n        name: userInfo.name,\r\n        description: userInfo.about,\r\n        avatar: userInfo.avatar,\r\n        _id: userInfo._id\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n    api.getInitialCards()\r\n    .then(serverCards => {\r\n      setCards(serverCards);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n  },[]);\r\n\r\n\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    \r\n    api.toggleLike(card._id, !isLiked).then((newCard) => {\r\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n    });\r\n} \r\n  function handleCardDelete(card) {\r\n    api.removeCard(card._id).then(() => {\r\n      setCards(() => cards.filter((c) => {return c._id !== card._id}));\r\n    });\r\n  }\r\n\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(null);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.setUserInfo(data)\r\n    .then(userInfo => {\r\n      setCurrentUser({\r\n        name: userInfo.name,\r\n        description: userInfo.about,\r\n        avatar: userInfo.avatar,\r\n        _id: userInfo._id\r\n      });\r\n      closeAllPopups();\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  function handleUpdateAvatar(data) {\r\n    api.setUserAvatar(data)\r\n    .then(userInfo => {\r\n      setCurrentUser({\r\n        name: userInfo.name,\r\n        description: userInfo.about,\r\n        avatar: userInfo.avatar,\r\n        _id: userInfo._id\r\n      });\r\n      closeAllPopups();\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n\r\n  function handleAddPlaceSubmit(data) {\r\n    api.addNewCard(data)\r\n    .then(newCard => {\r\n      setCards([newCard, ...cards]);\r\n      closeAllPopups();\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <div className=\"page__wrapper\">\r\n          <Header />\r\n          <Main \r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n            onEditProfileClick={handleEditProfileClick}\r\n            onAddPlaceClick={handleAddPlaceClick}\r\n            onEditAvatarClick={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n          />\r\n          <Footer />\r\n        </div>\r\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\r\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\r\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlaceSubmit={handleAddPlaceSubmit}/>\r\n        <PopupWithForm name=\"remove-card\" title=\"Are you sure?\" />\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}